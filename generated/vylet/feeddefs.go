// Code generated by cmd/lexgen (see Makefile's lexgen); DO NOT EDIT.

// Lexicon schema: app.vylet.feed.defs

package vylet

import (
	"encoding/json"
	"fmt"

	comatproto "github.com/bluesky-social/indigo/api/atproto"
	lexutil "github.com/bluesky-social/indigo/lex/util"
)

// FeedDefs_CommentView is a "commentView" in the app.vylet.feed.defs schema.
type FeedDefs_CommentView struct {
	Author     *ActorDefs_ProfileViewBasic   `json:"author" cborgen:"author"`
	Cid        string                        `json:"cid" cborgen:"cid"`
	CreatedAt  *string                       `json:"createdAt,omitempty" cborgen:"createdAt,omitempty"`
	Facets     []*RichtextFacet              `json:"facets,omitempty" cborgen:"facets,omitempty"`
	IndexedAt  string                        `json:"indexedAt" cborgen:"indexedAt"`
	Labels     []*comatproto.LabelDefs_Label `json:"labels,omitempty" cborgen:"labels,omitempty"`
	Parent     *comatproto.RepoStrongRef     `json:"parent,omitempty" cborgen:"parent,omitempty"`
	ReplyCount *int64                        `json:"replyCount,omitempty" cborgen:"replyCount,omitempty"`
	Root       *comatproto.RepoStrongRef     `json:"root,omitempty" cborgen:"root,omitempty"`
	Text       *string                       `json:"text,omitempty" cborgen:"text,omitempty"`
	Uri        string                        `json:"uri" cborgen:"uri"`
	Viewer     *FeedDefs_ViewerState         `json:"viewer,omitempty" cborgen:"viewer,omitempty"`
}

// FeedDefs_PostView is a "postView" in the app.vylet.feed.defs schema.
type FeedDefs_PostView struct {
	Author     *ActorDefs_ProfileViewBasic   `json:"author" cborgen:"author"`
	Caption    *string                       `json:"caption,omitempty" cborgen:"caption,omitempty"`
	Cid        string                        `json:"cid" cborgen:"cid"`
	CreatedAt  string                        `json:"createdAt" cborgen:"createdAt"`
	Facets     []*RichtextFacet              `json:"facets,omitempty" cborgen:"facets,omitempty"`
	IndexedAt  string                        `json:"indexedAt" cborgen:"indexedAt"`
	Labels     []*comatproto.LabelDefs_Label `json:"labels,omitempty" cborgen:"labels,omitempty"`
	LikeCount  *int64                        `json:"likeCount,omitempty" cborgen:"likeCount,omitempty"`
	Media      *FeedDefs_PostView_Media      `json:"media" cborgen:"media"`
	ReplyCount *int64                        `json:"replyCount,omitempty" cborgen:"replyCount,omitempty"`
	Uri        string                        `json:"uri" cborgen:"uri"`
	Viewer     *FeedDefs_ViewerState         `json:"viewer,omitempty" cborgen:"viewer,omitempty"`
}

type FeedDefs_PostView_Media struct {
	MediaImages_View *MediaImages_View
}

func (t *FeedDefs_PostView_Media) MarshalJSON() ([]byte, error) {
	if t.MediaImages_View != nil {
		t.MediaImages_View.LexiconTypeID = "app.vylet.media.images#view"
		return json.Marshal(t.MediaImages_View)
	}
	return nil, fmt.Errorf("can not marshal empty union as JSON")
}

func (t *FeedDefs_PostView_Media) UnmarshalJSON(b []byte) error {
	typ, err := lexutil.TypeExtract(b)
	if err != nil {
		return err
	}

	switch typ {
	case "app.vylet.media.images#view":
		t.MediaImages_View = new(MediaImages_View)
		return json.Unmarshal(b, t.MediaImages_View)
	default:
		return nil
	}
}

// FeedDefs_ViewerState is a "viewerState" in the app.vylet.feed.defs schema.
//
// Metadata about the requesting account's relationship with the subject content. Only has meaningful content for authed requests.
type FeedDefs_ViewerState struct {
	Like *string `json:"like,omitempty" cborgen:"like,omitempty"`
}
